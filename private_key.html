<!DOCTYPE html>
<html>
<head>
    <title>Successful Registration</title>
    <script>
        function downloadFile() {
            // Trigger file download
            var link = document.createElement('a');
            link.href = 'master_key.txt';
            link.download = 'master_key.txt';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function deleteAndRedirect() {
            // Delete the file from the server after a delay
            setTimeout(() => {
                fetch('delete_file.php')
                    .then(response => {
                        if (response.ok) {
                            // Redirect to another site after successful deletion
                            window.location.href = 'index.html';
                        } else {
                            console.error('Failed to delete file from server');
                        }
                    })
                    .catch(error => {
                        console.error('Error occurred while deleting file:', error);
                    });
            }, 60000); // Delay in milliseconds (adjust as needed)
        }
    </script>
</head>
<body>
    <h2>Registration Successful!</h2>
    <p>Your private key has been generated. Click the button below to download:</p>
    <button onclick="downloadFile()">Download Private Key</button>
    <p>After downloading, please wait while we process your request...</p>
    <a href="index.html">Click here to login</a>
    <script>
        deleteAndRedirect(); // Automatically trigger deletion and redirection after a delay
    </script>
</body>
</html>